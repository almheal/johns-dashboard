(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f55b6e6"],{"1fa5":function(e,t,a){},"37f1":function(e,t,a){"use strict";a("8ac8")},"53ca":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}},"58c2":function(e,t,a){"use strict";a.r(t);var r=a("7a23");Object(r["pushScopeId"])("data-v-152a3180");var o={class:"categories"},n={class:"categories__inner"},c={class:"categories__title"},i=["src"],l={class:"categories__body"};function d(e,t,a,d,u,s){var p=Object(r["resolveComponent"])("app-upload-file"),m=Object(r["resolveComponent"])("app-input"),b=Object(r["resolveComponent"])("app-button"),y=Object(r["resolveComponent"])("app-table"),g=Object(r["resolveComponent"])("app-information-modal");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",o,[Object(r["createElementVNode"])("div",n,[Object(r["createElementVNode"])("h1",c,Object(r["toDisplayString"])(e.$t("admin.menu.category")),1),Object(r["createElementVNode"])("form",{class:"categories__form",onSubmit:t[4]||(t[4]=Object(r["withModifiers"])((function(){return s.categoryHandler&&s.categoryHandler.apply(s,arguments)}),["prevent"]))},[e.categoryPreviewImg?(Object(r["openBlock"])(),Object(r["createElementBlock"])("img",{key:0,class:"categories__preview",src:e.categoryPreviewImg,alt:"category-preview"},null,8,i)):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(p,{class:"categories__upload",error:e.$t(e.errors.icon),modelValue:e.iconUrl,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.iconUrl=t}),onChangeFile:s.changeIcon,onPreview:t[1]||(t[1]=function(t){return e.categoryPreviewImg=t})},null,8,["error","modelValue","onChangeFile"]),Object(r["createVNode"])(m,{placeholder:e.$t("admin.utils.title"),error:e.$t(e.errors.title),modelValue:e.category.title,"onUpdate:modelValue":[t[2]||(t[2]=function(t){return e.category.title=t}),t[3]||(t[3]=function(t){return e.errors.title=""})]},null,8,["placeholder","error","modelValue"]),Object(r["createVNode"])(b,{class:"categories__button",buttonType:"submit",text:e.editCategoryId?e.$t("admin.utils.edit"):e.$t("admin.utils.add"),loading:e.createLoader||e.updateLoader},null,8,["text","loading"]),e.editCategoryId?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:1,class:"categories__button",text:e.$t("admin.utils.cancel"),onClickButton:s.resetCategory},null,8,["text","onClickButton"])):Object(r["createCommentVNode"])("",!0)],32),Object(r["createElementVNode"])("div",l,[Object(r["createVNode"])(y,{columns:s.columns,rows:s.rows,cross:!0,edit:!0,loading:e.getItemsLoader,onClickCross:e.openDeleteModal,onClickEdit:s.editCategoryHandler},null,8,["columns","rows","loading","onClickCross","onClickEdit"])])]),e.deleteItemId?(Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:0,buttons:e.buttonsModalDelete,title:e.$t("admin.confirmDelete.title"),text:"".concat(e.$t("admin.confirmDelete.text"),"?"),close:e.closeModal},null,8,["buttons","title","text","close"])):Object(r["createCommentVNode"])("",!0)])}Object(r["popScopeId"])();var u=a("53ca"),s=a("1da1"),p=a("5530"),m=(a("96cf"),a("d81d"),a("b64b"),a("c3c0")),b=a("74ac"),y=a("d9ea"),g=a("16ec"),f=a("a1f5"),O=a("6079"),v=a("847a"),j=a("69fa"),h=a("5502"),I={name:"Categories",components:{AppInput:m["a"],AppButton:b["a"],AppUploadFile:y["a"],AppTable:g["a"],AppInformationModal:f["a"]},mixins:[O["a"]],data:function(){return{category:{title:"",icon:""},errors:{title:"",icon:""},iconUrl:"",categoryPreviewImg:"",editCategoryId:null}},computed:Object(p["a"])(Object(p["a"])({},Object(h["e"])({createLoader:function(e){return e.category.createLoader},updateLoader:function(e){return e.category.updateLoader},deleteLoader:function(e){return e.category.deleteLoader},getItemsLoader:function(e){return e.category.getItemsLoader},getCategories:function(e){return e.category.items}})),{},{columns:function(){return[{title:this.$t("admin.utils.title")},{title:this.$t("admin.utils.icon")}]},rows:function(){var e=this;return this.getCategories.map((function(t){return{item:t,cells:[{title:e.$t(t.title)},{img:t.icon}]}}))}}),methods:Object(p["a"])(Object(p["a"])({},Object(h["b"])({getAllCategories:"category/getAllItems",createCategory:"category/createItem",updateCategory:"category/updateItem",deleteItem:"category/deleteItem"})),{},{categoryHandler:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.validate(),a){t.next=3;break}return t.abrupt("return");case 3:if(t.prev=3,"object"!==Object(u["a"])(e.category.icon)){t.next=10;break}return t.next=7,Object(v["a"])(e.category.icon);case 7:r=t.sent,o=r.data,e.category.icon=o;case 10:if(!e.editCategoryId){t.next=15;break}return t.next=13,e.updateCategory({id:e.editCategoryId,body:e.category});case 13:t.next=17;break;case 15:return t.next=17,e.createCategory({body:e.category});case 17:e.resetCategory(),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](3),console.log(t.t0);case 23:case"end":return t.stop()}}),t,null,[[3,20]])})))()},validate:function(){var e=this,t={title:"errors.".concat(j["a"].CATEGORY_TITLE_EMPTY),icon:"errors.".concat(j["a"].CATEGORY_ICON_EMPTY)};return Object.keys(t).reduce((function(a,r){return e.category[r]||(e.errors[r]=t[r],a=!1),a}),!0)},deleteItemHandler:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.deleteItem({id:e.deleteItemId});case 2:e.closeModal();case 3:case"end":return t.stop()}}),t)})))()},editCategoryHandler:function(e){var t=e.item;this.category.title=t.title,this.category.icon=t.icon,this.categoryPreviewImg=t.icon,this.editCategoryId=t._id},changeIcon:function(e){this.category.icon=e,this.errors.icon=""},resetCategory:function(){this.category.title="",this.category.icon="",this.editCategoryId=null,this.iconUrl="",this.categoryPreviewImg=""}}),mounted:function(){this.getAllCategories()}},k=(a("b096"),a("d959")),C=a.n(k);const _=C()(I,[["render",d],["__scopeId","data-v-152a3180"]]);t["default"]=_},"847a":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("bdd0"),o=function(e){return Object(r["a"])({url:"/images",method:"post",body:e})}},"8ac8":function(e,t,a){},b096:function(e,t,a){"use strict";a("ede7")},c3c0:function(e,t,a){"use strict";var r=a("7a23");Object(r["pushScopeId"])("data-v-4505273c");var o={class:"input-wrapper"},n=["for"],c={key:0,class:"input__required"},i=["type","value","placeholder","id"],l={key:1,class:"input__error","data-test":"error"};function d(e,t,a,d,u,s){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",o,[a.label?(Object(r["openBlock"])(),Object(r["createElementBlock"])("label",{key:0,for:s.dynamicId,class:"input__label","data-test":"label"},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.label),1),a.required?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",c,"*")):Object(r["createCommentVNode"])("",!0)],8,n)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("input",{class:Object(r["normalizeClass"])(["input",{error:a.error}]),"data-test":"input",type:a.typeInput,value:a.modelValue,placeholder:a.placeholder,id:s.dynamicId,onInput:t[0]||(t[0]=function(){return s.inputHandler&&s.inputHandler.apply(s,arguments)})},null,42,i),a.error?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",l,Object(r["toDisplayString"])(a.error),1)):Object(r["createCommentVNode"])("",!0)])}Object(r["popScopeId"])();var u=a("ed08"),s={name:"AppInput",props:{modelValue:{type:String,default:""},required:{type:Boolean,default:!1},label:{type:String,default:""},typeInput:{type:String,default:"text"},placeholder:{type:String,default:""},error:{type:String,default:""},saveKey:{type:String,default:""},saveProperty:{type:String,default:""},isSaved:{type:Boolean,default:!1}},computed:{dynamicId:function(){var e=Date.now()*Math.random()/Math.random();return e}},watch:{modelValue:function(e){this.saveKey&&this.saveProperty&&this.isSaved&&Object(u["e"])({key:this.saveKey,property:this.saveProperty,data:e})}},methods:{inputHandler:function(e){this.$emit("update:modelValue",e.target.value),this.saveKey&&this.saveProperty&&this.isSaved&&Object(u["e"])({key:this.saveKey,property:this.saveProperty,data:e.target.value})}},mounted:function(){this.saveKey&&this.saveProperty&&this.isSaved&&this.$emit("update:modelValue",Object(u["b"])({key:this.saveKey,property:this.saveProperty}))}},p=(a("37f1"),a("d959")),m=a.n(p);const b=m()(s,[["render",d],["__scopeId","data-v-4505273c"]]);t["a"]=b},d9ea:function(e,t,a){"use strict";var r=a("7a23");Object(r["pushScopeId"])("data-v-43ed4a52");var o={class:"app-upload"},n=["for"],c={key:0,class:"app-upload__required"},i=["id","value"],l={key:1,class:"app-upload__error"};function d(e,t,a,d,u,s){var p=Object(r["resolveComponent"])("app-button");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",o,[a.label?(Object(r["openBlock"])(),Object(r["createElementBlock"])("label",{key:0,class:"app-upload__label",for:s.dynamicId},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.label),1),a.required?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",c,"*")):Object(r["createCommentVNode"])("",!0)],8,n)):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(p,{class:Object(r["normalizeClass"])(["app-upload__button",{"app-upload__button_margin-bottom":a.error}]),text:e.$t("admin.utils.upload"),onClickButton:s.triggerInput},null,8,["class","text","onClickButton"]),Object(r["createElementVNode"])("input",{class:"app-upload__input",id:s.dynamicId,type:"file",ref:"inputFile",value:a.modelValue,onChange:t[0]||(t[0]=function(){return s.changeInput&&s.changeInput.apply(s,arguments)})},null,40,i),a.error?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",l,Object(r["toDisplayString"])(a.error),1)):Object(r["createCommentVNode"])("",!0)])}Object(r["popScopeId"])();var u=a("74ac"),s={name:"AppUploadFile",emits:["changeFile","preview","update:modelValue"],components:{AppButton:u["a"]},props:{label:{type:String,default:""},error:{type:String,default:""},modelValue:{type:String,default:""},required:{type:Boolean,default:!1}},methods:{triggerInput:function(){this.$refs.inputFile.click()},changeInput:function(e){var t=this,a=e.target.files[0],r=new FormData;r.append("file",a);var o=new FileReader;o.onload=function(e){t.$emit("preview",e.target.result)},o.readAsDataURL(a),this.$emit("changeFile",r),this.$emit("update:modelValue",e.target.value)}},computed:{dynamicId:function(){return Date.now()*Math.random()/Math.random()}}},p=(a("e12e"),a("d959")),m=a.n(p);const b=m()(s,[["render",d],["__scopeId","data-v-43ed4a52"]]);t["a"]=b},e12e:function(e,t,a){"use strict";a("1fa5")},ede7:function(e,t,a){}}]);
//# sourceMappingURL=chunk-4f55b6e6.623b340e.js.map